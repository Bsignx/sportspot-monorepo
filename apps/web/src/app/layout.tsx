import { Metadata } from 'next'
import { ReactNode } from 'react'

import StylesProvider from '~/styles/styles-provider'
import TrpcProvider from '~/helpers/trpc/trpc-provider'
import BottomNavigation from '~/components/bottom-navigation'
import { ProtectedWrapper } from './components/protected-wrapper'
import { NextAuthProvider } from '~/app/components/next-auth-provider'

import '~/components/map/leaflet.css'

export const metadata: Metadata = {
  title: 'Next.js',
  description: 'Generated by Next.js',
  manifest: '/manifest.json',
}

async function RootLayout({ children }: { children: ReactNode }) {
  return (
    <html lang="en">
      <body>
        <StylesProvider>
          <TrpcProvider>
            <NextAuthProvider>
              <ProtectedWrapper>
                {children}
                <BottomNavigation />
              </ProtectedWrapper>
            </NextAuthProvider>
          </TrpcProvider>
        </StylesProvider>
      </body>
    </html>
  )
}

export default RootLayout
